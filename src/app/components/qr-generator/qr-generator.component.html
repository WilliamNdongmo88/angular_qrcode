  <!-- Header -->
  <app-header></app-header>
<div class="qr-generator-container">
  <div class="header">
    <h1>Générateur de QR Code PDF</h1>
    <p>Téléchargez un fichier PDF et générez un QR code pour y accéder facilement</p>
  </div>

  <!-- Messages d'erreur et de succès -->
  <div class="messages">
    <div *ngIf="errorMessage" class="alert alert-error">
      {{ errorMessage }}
    </div>
    <div *ngIf="successMessage && isUploadPdfOn" class="alert alert-success">
      {{ successMessage }}
    </div>
  </div>

  <!-- Section de téléchargement de PDF -->
  <div class="upload-section" *ngIf="isUploadPdfOff">
    <h2>1. Télécharger un fichier PDF</h2>
    <div class="file-input-container">
      <input 
        type="file" 
        id="pdfFile" 
        accept=".pdf" 
        (change)="onFileSelected($event)"
        class="file-input"
      />
      <label for="pdfFile" class="file-label">
        <span *ngIf="!selectedFile">Choisir un fichier PDF</span>
        <span *ngIf="selectedFile">{{ selectedFile.name }}</span>
      </label>
    </div>
    
    <button 
      (click)="uploadPdf()" 
      [disabled]="!selectedFile || uploadedPdf"
      class="btn btn-primary"
    >
      <span *ngIf="uploadedPdf">Téléchargement...</span>
      <span *ngIf="!uploadedPdf">Télécharger le PDF</span>
    </button>
  </div>

  <!-- Informations du PDF téléchargé -->
  <div *ngIf="uploadedPdf && isUploadPdfOn" class="pdf-info">
    <h3>PDF téléchargé avec succès</h3>
    <div class="info-item">
      <strong>Nom du fichier:</strong> {{ uploadedPdf.originalFilename }}
    </div>
    <div class="info-item">
      <strong>Taille:</strong> {{ (uploadedPdf.fileSize / 1024 / 1024).toFixed(2) }} MB
    </div>
    <div class="info-item">
      <strong>Date de téléchargement:</strong> {{ uploadedPdf.uploadDate | date:'medium' }}
    </div>
    <button (click)="viewPdf(uploadedPdf.uniqueId)" class="btn btn-secondary">
      Voir le PDF
    </button>
    <button (click)="nextTab()" class="btn btn-secondary">
      Suivant
    </button>
  </div>

  <!-- Section de sélection de logo -->
  <div *ngIf="uploadedPdf && isLogoOff" class="logo-section">
    <h2>2. Logo personnalisé (optionnel)</h2>
    <p>Sélectionnez un logo à insérer au centre du QR code</p>
    
    <div class="logo-input-container">
      <input 
        type="file" 
        id="logoFile" 
        accept="image/*" 
        (change)="onLogoSelected($event)"
        class="file-input"
      />
      <label for="logoFile" class="file-label">
        <span *ngIf="!selectedLogo">Choisir un logo (optionnel)</span>
        <span *ngIf="selectedLogo">{{ selectedLogo.name }}</span>
      </label>
      
      <button (click)="nextGenerateQrCodeTab()" class="btn btn-outline btn-small">
        Suivant
      </button>
    </div>

    <div *ngIf="selectedLogo" class="logo-preview">
      <h4>Aperçu du logo :</h4>
      <img [src]="logoPreviewUrl" alt="Aperçu du logo" class="logo-preview-image" />
      <button (click)="removeLogo()" class="btn btn-outline btn-small">
        Supprimer le logo
      </button>
      <button (click)="nextGenerateQrCodeTab()" class="btn btn-outline btn-small">
        Suivant
      </button>
    </div>
  </div>

  <!-- Section de génération de QR Code -->
  <div *ngIf="uploadedPdf && isQrcodeOff" class="qr-generation-section">
    <h2>3. Générer le QR Code</h2>
    <p>Générez un QR code qui permettra d'accéder directement à votre PDF</p>
    
    <button 
      (click)="generateQrCode()" 
      [disabled]="isGenerating"
      class="btn btn-primary"
    >
      <span *ngIf="isGenerating">Génération...</span>
      <span *ngIf="!isGenerating">Générer le QR Code</span>
    </button>
  </div>

  <!-- QR Code généré -->
  <div *ngIf="generatedQrCode && isQrcodeOn" class="qr-result">
    <h3>QR Code généré avec succès !</h3>
    <div class="qr-display">
      <img 
        [src]="getQrCodeImageUrl()" 
        alt="QR Code généré"
        class="qr-image"
      />
    </div>
    <div class="qr-info">
      <p><strong>Contenu du QR Code:</strong> {{ generatedQrCode.qrContent }}</p>
      <p><strong>Date de génération:</strong> {{ generatedQrCode.generationDate | date:'medium' }}</p>
    </div>
    <div class="qr-actions">
      <button (click)="downloadQrCode()" class="btn btn-success">
        Télécharger le QR Code
      </button>
    </div>
  </div>

  <!-- Actions globales -->
  <div class="global-actions">
    <button (click)="reset()" class="btn btn-outline">
      Recommencer
    </button>
  </div>
</div>
